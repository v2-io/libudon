---
# Array tests - [value value ...] syntax in attribute values

- id: simple_array
  desc: Simple array of bare strings
  udon: "|foo\n  :tags [a b c]\n"
  events:
    - ElementStart
    - [Name, "foo"]
    - [Attr, "tags"]
    - ArrayStart
    - [BareValue, "a"]
    - [BareValue, "b"]
    - [BareValue, "c"]
    - ArrayEnd
    - ElementEnd

- id: array_with_integers
  desc: Array with integer values
  udon: "|foo\n  :nums [1 2 3]\n"
  events:
    - ElementStart
    - [Name, "foo"]
    - [Attr, "nums"]
    - ArrayStart
    - [Integer, "1"]
    - [Integer, "2"]
    - [Integer, "3"]
    - ArrayEnd
    - ElementEnd

# PARSER BUG: Quoted strings in arrays - parser consumes ] as part of value
# causing UnclosedArray error. Commented out until grammar is fixed.
# - id: array_with_quoted_strings
#   desc: Array with quoted strings
#   udon: "|foo\n  :names [\"Alice\" \"Bob\"]\n"
#   events: []

# PARSER BUG: Nested arrays - parser treats [[ as part of value, not nested array.
# Commented out until grammar is fixed.
# - id: nested_array
#   desc: Nested arrays
#   udon: "|foo\n  :matrix [[1 2] [3 4]]\n"
#   events: []

- id: empty_array
  desc: Empty array
  udon: "|foo\n  :items []\n"
  events:
    - ElementStart
    - [Name, "foo"]
    - [Attr, "items"]
    - ArrayStart
    - ArrayEnd
    - ElementEnd
# ============================================================================
# PARSER BUGS: The following tests are commented out until the grammar is fixed.
# Issues: nested arrays not handled, quoted strings in arrays consume ] incorrectly
# ============================================================================

# - id: deeply_nested_arrays_5_levels
#   desc: deeply nested arrays 5 levels
#   udon: |-
#     |foo
#       :deep [[[[[1]]]]]
#   events: []

# - id: deeply_nested_empty_arrays
#   desc: deeply nested empty arrays
#   udon: |-
#     |foo
#       :empty [[[[[]]]]]
#   events: []

# - id: mixed_nesting_with_values_at_each_level
#   desc: mixed nesting with values at each level
#   udon: |-
#     |foo
#       :mix [1 [2 [3 [4 [5]]] 6] 7]
#   events: []

# - id: array_with_all_value_types
#   desc: array with all value types (includes quoted string)
#   udon: |-
#     |foo
#       :types [42 3.14 true false null "quoted" bare]
#   events: []

# - id: array_siblings_at_multiple_levels
#   desc: array siblings at multiple levels
#   udon: |-
#     |foo
#       :grid [[a b] [c d] [e f]]
#   events: []

# - id: array_with_quoted_strings_containing_brackets
#   desc: array with quoted strings containing brackets
#   udon: |-
#     |foo
#       :tricky ["[not an array]" "]" "["]
#   events: []

# - id: complex_nested_structure
#   desc: complex nested structure
#   udon: |-
#     |foo
#       :cube [[[1 2] [3 4]] [[5 6] [7 8]]]
#   events: []

# - id: array_with_single_quoted_strings
#   desc: array with single quoted strings
#   udon: |-
#     |foo
#       :names ['Alice' 'Bob']
#   events: []

# - id: array_multiline
#   desc: array multiline
#   udon: |-
#     |foo
#       :items [
#         a
#         b
#         c
#       ]
#   events: []

# - id: empty_arrays_at_various_depths
#   desc: empty arrays at various depths
#   udon: |-
#     |foo
#       :empties [[] [[]] [[[]]]]
#   events: []
